<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Journal â€” SEIA</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Syne:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/static/css/main.css">
<style>
.journal-page{padding-top:84px;padding-bottom:40px;min-height:100vh;}
.journal-header{margin-bottom:32px;}
.journal-header h1{font-family:'Orbitron',monospace;font-size:1.4rem;font-weight:700;color:var(--white);}
.journal-header p{color:var(--muted);font-size:.85rem;margin-top:5px;}
.write-card{background:var(--card);border:1px solid rgba(29,110,245,.15);border-radius:12px;padding:28px;margin-bottom:28px;}
.write-card-title{font-family:'Orbitron',monospace;font-size:.7rem;font-weight:700;letter-spacing:2px;color:var(--blue-light);margin-bottom:16px;}
.journal-textarea{width:100%;background:var(--panel);border:1px solid var(--edge);border-radius:8px;color:var(--white);padding:16px;font-family:'Syne',sans-serif;font-size:.9rem;line-height:1.7;resize:vertical;min-height:160px;outline:none;transition:border-color .25s;}
.journal-textarea:focus{border-color:var(--blue-glow);box-shadow:0 0 0 3px rgba(29,110,245,.1);}
.journal-textarea::placeholder{color:var(--dim);}
.write-footer{display:flex;align-items:center;justify-content:space-between;margin-top:14px;flex-wrap:wrap;gap:10px;}
.mood-pick{display:flex;align-items:center;gap:10px;font-size:.82rem;color:var(--muted);}
.mood-pick select{background:var(--panel);border:1px solid var(--edge);color:var(--white);padding:7px 12px;border-radius:7px;font-family:'Syne',sans-serif;font-size:.82rem;outline:none;}
.entries-section{margin-top:8px;}
.entries-title{font-family:'Orbitron',monospace;font-size:.7rem;font-weight:700;letter-spacing:2px;color:var(--blue-light);margin-bottom:16px;}
.entry-card{background:var(--card);border:1px solid var(--edge);border-radius:10px;padding:22px;margin-bottom:14px;transition:border-color .3s;}
.entry-card:hover{border-color:rgba(29,110,245,.25);}
.entry-meta{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;}
.entry-date{font-size:.75rem;color:var(--dim);font-family:'Orbitron',monospace;}
.entry-mood{font-size:.78rem;background:rgba(29,110,245,.08);border:1px solid rgba(29,110,245,.15);color:var(--blue-light);padding:3px 10px;border-radius:4px;}
.entry-content{font-size:.88rem;color:var(--muted);line-height:1.7;white-space:pre-wrap;}
.entry-del{background:none;border:none;color:var(--dim);cursor:pointer;font-size:.8rem;transition:color .2s;padding:2px 6px;}
.entry-del:hover{color:#f87171;}
.no-entries{text-align:center;padding:48px;color:var(--dim);}
.no-entries .ni{font-size:3rem;margin-bottom:12px;}
</style>
</head>
<body>
<nav class="app-nav">
  <a href="/" class="nav-brand"><span class="nav-logo">SEIA</span></a>
  <div class="nav-links">
    <a href="/chat"      class="nav-link">ğŸ’¬ Chat</a>
    <a href="/dashboard" class="nav-link">ğŸ“Š Dashboard</a>
    <a href="/journal"   class="nav-link active">ğŸ““ Journal</a>
    <a href="/reviews"   class="nav-link">â­ Reviews</a>
    <a href="/profile"   class="nav-link">ğŸ‘¤ {{user.name}}</a>
    <a href="/logout"    class="nav-btn-out">Logout</a>
  </div>
</nav>
 
<div class="page journal-page">
<div class="container" style="max-width:720px;">
  <div class="journal-header">
    <h1>ğŸ““ Private Journal</h1>
    <p>Your thoughts, only yours. SEIA never shares your journal entries.</p>
  </div>
 
  <!-- Write entry -->
  <div class="write-card">
    <div class="write-card-title">NEW ENTRY</div>
    <textarea class="journal-textarea" id="journal-content" placeholder="What's on your mind today? Write freelyâ€¦"></textarea>
    <div class="write-footer">
      <div class="mood-pick">
        <label>Mood:</label>
        <select id="journal-mood">
          <option value="">Selectâ€¦</option>
          <option value="10">ğŸ¥³ Amazing (10)</option>
          <option value="8">ğŸ˜„ Great (8)</option>
          <option value="7">ğŸ™‚ Good (7)</option>
          <option value="5">ğŸ˜ Neutral (5)</option>
          <option value="3">ğŸ˜” Low (3)</option>
          <option value="1">ğŸ˜ Terrible (1)</option>
        </select>
      </div>
      <button class="btn btn-primary btn-sm" onclick="saveEntry()">Save Entry</button>
    </div>
    <div id="entry-success" style="display:none;margin-top:10px;padding:8px 14px;background:rgba(16,185,129,.1);border:1px solid rgba(16,185,129,.25);border-radius:7px;color:#34d399;font-size:.8rem;">
      âœ“ Entry saved!
    </div>
  </div>
 
  <!-- Past entries -->
  <div class="entries-section">
    <div class="entries-title">YOUR ENTRIES</div>
    <div id="entries-list"><div class="no-entries"><div class="ni">ğŸ““</div>Loading entriesâ€¦</div></div>
  </div>
</div>
</div>
 
<script>
async function saveEntry() {
  const content = document.getElementById('journal-content').value.trim();
  const mood    = document.getElementById('journal-mood').value;
  if (!content) return alert('Write something first!');
  const res  = await fetch('/api/journal', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({ content, mood_score: mood ? parseInt(mood) : null }),
  });
  const data = await res.json();
  if (data.success) {
    document.getElementById('journal-content').value = '';
    document.getElementById('journal-mood').value = '';
    const ok = document.getElementById('entry-success');
    ok.style.display = 'block';
    setTimeout(() => ok.style.display = 'none', 3000);
    loadEntries();
  }
}
 
async function loadEntries() {
  const res     = await fetch('/api/journal');
  const entries = await res.json();
  const list    = document.getElementById('entries-list');
  if (entries.length === 0) {
    list.innerHTML = '<div class="no-entries"><div class="ni">ğŸ“</div><p>No entries yet. Write your first one above.</p></div>';
    return;
  }
  const moodLabel = { 10:'ğŸ¥³ Amazing',8:'ğŸ˜„ Great',7:'ğŸ™‚ Good',5:'ğŸ˜ Neutral',3:'ğŸ˜” Low',1:'ğŸ˜ Terrible' };
  list.innerHTML = entries.map(e => `
    <div class="entry-card" id="entry-${e.id}">
      <div class="entry-meta">
        <span class="entry-date">${e.date} at ${e.time}</span>
        <div style="display:flex;align-items:center;gap:8px;">
          ${e.mood ? `<span class="entry-mood">${moodLabel[e.mood] || 'Mood '+e.mood}</span>` : ''}
          <button class="entry-del" onclick="deleteEntry(${e.id})" title="Delete">âœ•</button>
        </div>
      </div>
      <div class="entry-content">${e.content.replace(/</g,'&lt;').replace(/>/g,'&gt;')}</div>
    </div>
  `).join('');
}
 
async function deleteEntry(id) {
  if (!confirm('Delete this entry?')) return;
  await fetch(`/api/journal/${id}`, { method: 'DELETE' });
  const el = document.getElementById(`entry-${id}`);
  if (el) el.remove();
}
 
document.addEventListener('DOMContentLoaded', loadEntries);
</script>
</body>
</html>
 
