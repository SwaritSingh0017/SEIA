<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Dashboard â€” SEIA</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Syne:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/dashboard.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
 
<nav class="app-nav">
  <a href="/" class="nav-brand"><span class="nav-logo">SEIA</span></a>
  <div class="nav-links">
    <a href="/chat"      class="nav-link">ğŸ’¬ Chat</a>
    <a href="/dashboard" class="nav-link active">ğŸ“Š Dashboard</a>
    <a href="/journal"   class="nav-link">ğŸ““ Journal</a>
    <a href="/reviews"   class="nav-link">â­ Reviews</a>
    <a href="/profile"   class="nav-link">ğŸ‘¤ {{user.name}}</a>
    <a href="/logout"    class="nav-btn-out">Logout</a>
  </div>
</nav>
 
<div class="page dashboard-page">
<div class="container">
 
  <!-- Header -->
  <div class="dash-header">
    <div>
      <div class="dash-greeting">Hey, <span>{{user.name}}</span> ğŸ‘‹</div>
      <div class="dash-sub">Here's your SEIA activity overview</div>
    </div>
    <a href="/chat" class="btn btn-primary">ğŸ’¬ Open Chat</a>
  </div>
 
  <!-- Stats row -->
  <div class="stats-row">
    <div class="stat-card">
      <span class="stat-icon">ğŸ’¬</span>
      <div class="stat-num">{{msg_count}}</div>
      <div class="stat-label">Total Messages</div>
    </div>
    <div class="stat-card">
      <span class="stat-icon">ğŸ“ˆ</span>
      <div class="stat-num" id="mood-average">â€“</div>
      <div class="stat-label">Avg Mood Score</div>
    </div>
    <div class="stat-card">
      <span class="stat-icon">ğŸ”¥</span>
      <div class="stat-num" id="mood-streak">{{streak}}</div>
      <div class="stat-label">Day Streak</div>
    </div>
    <div class="stat-card">
      <span class="stat-icon">âœ…</span>
      <div class="stat-num">{{task_count}}</div>
      <div class="stat-label">Pending Tasks</div>
    </div>
  </div>
 
  <!-- Two columns -->
  <div class="grid-2" style="align-items:start;">
 
    <!-- LEFT: mood chart + log -->
    <div>
      <!-- Mood chart -->
      <div class="chart-card">
        <div class="chart-card-header">
          <span class="chart-card-title">ğŸ“ˆ MOOD HISTORY</span>
          <div class="chart-days-btns">
            <button class="days-btn" data-days="7">7d</button>
            <button class="days-btn active" data-days="30">30d</button>
          </div>
        </div>
        <div class="chart-body">
          <canvas id="mood-chart"></canvas>
          <div id="no-mood-data" style="display:none;position:absolute;inset:0;display:none;align-items:center;justify-content:center;color:var(--dim);font-size:.85rem;">
            No mood data yet â€” log your first mood below!
          </div>
        </div>
      </div>
 
      <!-- Mood log -->
      <div class="mood-log-card">
        <div class="mood-log-title">LOG TODAY'S MOOD</div>
        <div class="mood-slider-wrap">
          <input type="range" class="mood-slider" id="mood-slider" min="1" max="10" value="7">
          <div class="mood-score-display" id="mood-score-display">7</div>
          <div class="mood-emoji-display" id="mood-emoji-display">ğŸ˜Š</div>
        </div>
        <div class="form-group">
          <textarea class="form-input" id="mood-note" rows="2" placeholder="Optional: what's on your mind? (private)"></textarea>
        </div>
        <button class="btn btn-primary btn-sm" onclick="logMood()">Save Mood</button>
        <div class="mood-success" id="mood-success">âœ“ Mood logged! Chart updated.</div>
      </div>
    </div>
 
    <!-- RIGHT: tasks panel -->
    <div>
      <div class="tasks-panel">
        <div class="panel-header">
          <span class="panel-title">âœ… TASK MANAGER</span>
          <span style="font-size:.75rem;color:var(--dim);">{{task_count}} pending</span>
        </div>
        <div class="task-add-row">
          <input class="task-input" id="task-input" type="text" placeholder="Add a taskâ€¦ (press Enter)">
          <select class="form-input" id="task-priority" style="width:90px;padding:9px 8px;font-size:.78rem;">
            <option value="normal">Normal</option>
            <option value="high">High</option>
            <option value="low">Low</option>
          </select>
          <button class="btn btn-primary btn-sm" onclick="addTask()">+</button>
        </div>
        <div class="task-list" id="task-list">
          <div class="task-empty">Loading tasksâ€¦</div>
        </div>
      </div>
 
      <!-- Quick mood stats -->
      <div class="card" style="margin-top:20px;">
        <div style="font-family:'Orbitron',monospace;font-size:.65rem;letter-spacing:2px;color:var(--blue-light);margin-bottom:16px;">MOOD STATS</div>
        <div class="grid-2" style="gap:12px;">
          <div style="text-align:center;padding:14px;background:var(--panel);border-radius:8px;">
            <div style="font-family:'Orbitron',monospace;font-size:1.4rem;color:var(--green);" id="mood-best">â€“</div>
            <div style="font-size:.72rem;color:var(--muted);margin-top:4px;">Best mood</div>
          </div>
          <div style="text-align:center;padding:14px;background:var(--panel);border-radius:8px;">
            <div style="font-family:'Orbitron',monospace;font-size:1.4rem;color:var(--blue-light);" id="mood-total">â€“</div>
            <div style="font-size:.72rem;color:var(--muted);margin-top:4px;">Total logged</div>
          </div>
        </div>
        <div style="margin-top:16px;padding:12px;background:rgba(29,110,245,.05);border:1px solid rgba(29,110,245,.1);border-radius:8px;font-size:.78rem;color:var(--muted);">
          ğŸ’¡ <strong style="color:var(--blue-light);">Tip:</strong> SEIA auto-tracks your mood from conversation tone. Chat openly and your graph fills itself.
        </div>
      </div>
 
      <!-- Review link -->
      <div class="card" style="margin-top:16px;text-align:center;">
        <div style="font-size:1.5rem;margin-bottom:10px;">â­</div>
        <div style="font-weight:600;color:var(--white);margin-bottom:6px;">Enjoying SEIA?</div>
        <div style="font-size:.8rem;color:var(--muted);margin-bottom:14px;">Leave a review and help others discover it.</div>
        <a href="/reviews" class="btn btn-outline btn-sm">Write a Review</a>
      </div>
    </div>
 
  </div>
</div>
</div>
 
<script src="/static/js/mood.js"></script>
<script src="/static/js/tasks.js"></script>
</body>
</html>
 
